---
import Layout from "../../../layouts/Layout.astro";
import { notFound } from "../../../helper";

const { form: formID } = Astro.params;

import { Form, db, eq } from "astro:db";
import Control from "../../../components/control/Control.astro";
import FormScript from "../../../components/editor/FormScript.astro";

const formList = await db.select().from(Form).where(eq(Form.id, formID));
if (formList.length === 0) {
	return notFound();
}
const form = formList[0];
import editorSchema from "../../../components/editor/schema";
---

<Layout title="Welcome to Astro.">
	<div class="container">
		<a class="btn btn-secondary" href="/form">Back</a>
		<a class="btn btn-primary" href="./view">Preview</a>
		<div class="my-5">
			<Control control={editorSchema} value={form} />
		</div>
	</div>
</Layout>

<FormScript />