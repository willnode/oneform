---
import { Form, db, eq } from "astro:db";
import Layout from "@/layouts/Layout.astro";
import { backToLogin } from "@/components/helper";
import FormList from "./_index";
import { getTeam } from "@/lib/auth";
const team = await getTeam(Astro.request);
if (!team) {
  return backToLogin();
}
const formList = await db.select().from(Form).where(eq(Form.teamId, team));
---

<Layout title="List of Forms">
  <FormList list={formList} client:load />
</Layout>
